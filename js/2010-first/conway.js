d=document;c=d.getElementById("c");ctx=c.getContext("2d");cW=cH=c.width=c.height=400;gW=gH=175;bW=cW/gW;bH=cH/gH;mX=mY=-1;g=[];s=true;cX=cY=0;for(o=c;o;){cX+=o.offsetLeft;cY+=o.offsetTop;o=o.offsetParent}function k(a,b){if(a<0||b<0||a>=gW||b>=gH)return 0;return g[a][b]}g=[];for(var l=null,m=0,n=0;n<gW;n++){l=[];for(var p=0;p<gH;p++){m=Math.random()<0.75?0:1;l.push(m)}g.push(l)} setInterval(function(){for(var a=[],b=null,e=0,f=0;f<gW;f++){b=[];for(var h=0;h<gH;h++){e=0;for(var i=-1;i<=1;i++)for(var j=-1;j<=1;j++)if(i!=0||j!=0)e+=k(f+i,h+j);e=k(f,h)==1?e>=2&&e<=3?1:0:e==3?1:0;b.push(e)}a.push(b)}g=a},100);setInterval(function(){s?ctx.fillStyle="rgba(0,0,0,.1)":ctx.fillStyle="#FFF";ctx.fillRect(0,0,cW,cH);ctx.fillStyle=s?"#FFF":"#000";for(var a=0;a<gW;a++)for(var b=0;b<gH;b++)k(a,b)==1&&ctx.fillRect(a*bW,b*bH,bW,bH)},50); c.onmousemove=function(a){mX=a.clientX-cX+d.body.scrollLeft;mY=a.clientY-cY+d.body.scrollTop;gX=~~(mX/bW);gY=~~(mY/bH);g[gX][gY]=1};c.onclick=function(){s=!s};